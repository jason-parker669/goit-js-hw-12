{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page) { \n    const response = await axios.get(\"\", {\n        params: {\n            key: \"51819107-ec467fcdcf3190bdaabfbeda8\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page\n        }\n    })\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = null;\n\nexport function createGallery(images) { \n    const markup = images.map((image) => { \n        return `<li class=\"gallery-item\">\n\t            <a class=\"gallery-link\" href=${image.largeImageURL}>\n\t\t        <img \n\t\t            class=\"gallery-image\" \n\t\t            src=${image.webformatURL}\n\t\t            alt=${image.tags} \n\t\t        />\n\t            </a>\n                <ul class=\"gallery-subscript\">\n                    <li class=\"subscript-item\">\n                        <h2>Likes</h2>\n                        <p>${image.likes}</p>\n                    </li>\n                    <li class=\"subscript-item\">\n                        <h2>Views</h2>\n                        <p>${image.views}</p>    \n                    </li>\n                    <li class=\"subscript-item\">\n                        <h2>Comments</h2>\n                        <p>${image.comments}</p>\n                    </li>\n                    <li class=\"subscript-item\">\n                        <h2>Downloads</h2>\n                        <p>${image.downloads}</p>\n                    </li>\n                </ul>\n                </li>`}).join(\"\");\n    document.querySelector(\".gallery\").insertAdjacentHTML(\"beforeend\", markup);\n    if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery a\");\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n    document.querySelector(\".gallery\").innerHTML = \"\";\n}\n\nexport function showLoader() { \n    document.querySelector(\".loader\").classList.remove(\"hidden\");\n}\n\nexport function hideLoader() { \n    document.querySelector(\".loader\").classList.add(\"hidden\");\n}\n\nexport function hideLoadMoreButton() { \n    document.querySelector(\".show-more\").classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() { \n    document.querySelector(\".show-more\").classList.remove(\"hidden\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\"\nimport { createGallery, clearGallery, showLoader, hideLoader,showLoadMoreButton,hideLoadMoreButton } from \"./js/render-functions.js\"\n   \nconst searchForm = document.querySelector('.form');\nconst inputField = document.querySelector('input[name=\"search-text\"]');\nconst searchButton = document.querySelector('button[type=\"submit\"]');\nconst moreButton = document.querySelector('.show-more');\nlet page = 1;\nlet query = \"\";\nsearchButton.disabled = true;\nhideLoader();\nhideLoadMoreButton();\n\n\ninputField.addEventListener(\"input\", () => { \n    if (inputField.value.trim() === '')\n        searchButton.disabled = true;\n    else searchButton.disabled = false;\n})\n\nsearchForm.addEventListener(\"submit\", async (event) => { \n    event.preventDefault();\n    clearGallery();\n    showLoader();\n    query = inputField.value.trim();\n    page = 1;\n    try {\n        const galleryData = await getImagesByQuery(query, page);\n        const galleryArray = galleryData.hits;\n            if (galleryArray.length === 0) {\n                    hideLoader();\n                    iziToast.warning({\n                        title: ':(',\n                        message: 'So sad, nothing found',\n                        position: 'topRight',\n                    });\n                    searchForm.reset();\n                    searchButton.disabled = true;\n                }\n                else {\n                    createGallery(galleryArray);\n                    hideLoader();\n                                       \n                     if (document.querySelectorAll(\".gallery .gallery-item\").length >= galleryData.totalHits) {\n                        iziToast.warning({\n                             title: `That's all!`,\n                              message: `We're sorry, but you've reached the end of search results.`,\n                             position: 'bottomCenter',\n                        });\n                     }\n                     else { \n                         showLoadMoreButton();\n                         moreButton.textContent = `Give me more ${query}`;\n                         page += 1;\n\n                    }             \n                }\n    }\n    catch (error)\n    {       iziToast.warning({\n                    title: 'OH MY GOD, SOMETHING WENT WRONG!',\n                    message: `${error}`,\n                    position: 'topRight',\n            });\n            hideLoader();\n    };\n\n});\n\nmoreButton.addEventListener(\"click\", async (event) => { \n    event.preventDefault();\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const galleryData = await getImagesByQuery(query, page);\n        const galleryArray = galleryData.hits;\n        createGallery(galleryArray);\n        hideLoader();\n        if (document.querySelectorAll(\".gallery .gallery-item\").length >= galleryData.totalHits) {\n            iziToast.warning({\n                title: `That's all!`,\n                message: `We're sorry, but you've reached the end of search results.`,\n                position: 'bottomCenter',\n        });\n                }\n            else {\n                const card = document.querySelector('.gallery .gallery-item');\n                if (card) {\n                  const h = card.getBoundingClientRect().height;\n                  window.scrollBy({ top: 2 * h, behavior: 'smooth' });\n                }\n                showLoadMoreButton();\n                moreButton.textContent = `Give me more ${query}`;\n                page += 1;              \n                }\n    }\n    catch (error)\n    {       iziToast.warning({\n                    title: 'OH MY GOD, SOMETHING WENT WRONG!',\n                    message: `${error}`,\n                    position: 'topRight',\n            });\n            hideLoader();\n    };\n\n})\n\n\n"],"names":["axios","getImagesByQuery","query","page","lightbox","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","hideLoadMoreButton","showLoadMoreButton","searchForm","inputField","searchButton","moreButton","event","galleryData","galleryArray","iziToast","error","card","h"],"mappings":"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"}